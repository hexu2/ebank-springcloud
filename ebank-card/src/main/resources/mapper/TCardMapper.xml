<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hexu.ebank.card.mapper.TCardMapper">
  <resultMap id="BaseResultMap" type="com.hexu.ebank.card.entity.TCard">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 28 23:19:59 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="card_no" jdbcType="VARCHAR" property="cardNo" />
    <result column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="card_type_code" jdbcType="INTEGER" property="cardTypeCode" />
    <result column="product_code" jdbcType="INTEGER" property="productCode" />
    <result column="pin_no" jdbcType="VARCHAR" property="pinNo" />
    <result column="cvv2" jdbcType="VARCHAR" property="cvv2" />
    <result column="status" jdbcType="CHAR" property="status" />
    <result column="exprie_time" jdbcType="TIMESTAMP" property="exprieTime" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
  </resultMap>

    <resultMap id="TCardWarpperResult" type="com.hexu.ebank.card.entity.warpper.TCardWarpper">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Dec 28 23:19:59 CST 2019.
        -->
        <id column="id" jdbcType="INTEGER" property="id" />
        <result column="card_no" jdbcType="VARCHAR" property="cardNo" />
        <result column="user_id" jdbcType="INTEGER" property="userId" />
        <result column="card_type_code" jdbcType="INTEGER" property="cardTypeCode" />
        <result column="card_type_name" jdbcType="VARCHAR" property="cardTypeName" />
        <result column="product_code" jdbcType="INTEGER" property="productCode" />
        <result column="product_type_name" jdbcType="VARCHAR" property="productTypeName" />
        <result column="pin_no" jdbcType="VARCHAR" property="pinNo" />
        <result column="cvv2" jdbcType="VARCHAR" property="cvv2" />
        <result column="status" jdbcType="CHAR" property="status" />
        <result column="exprie_time" jdbcType="TIMESTAMP" property="exprieTime" />
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    </resultMap>
   <select id="selectAllTCardWarpper" resultMap="TCardWarpperResult">

           select
    a.id, a.card_no, a.user_id, a.card_type_code, b.card_type_name, a.product_code,c.product_type_name, a.pin_no, a.cvv2, a.status, a.exprie_time, a.create_time, a.update_time
    from
    t_card a,
    t_card_type b,
    t_product c
    where
    a.card_type_code = b.id and
    a.product_code = c.id
   </select>


    <select id="getCardDetailsByCardId" resultMap="TCardWarpperResult" parameterType="java.lang.Integer">

select
 d.id, d.card_no, d.user_id, d.card_type_code, d.card_type_name, d.product_code,d.product_type_name, d.pin_no, d.cvv2, d.status, d.exprie_time, d.create_time, d.update_time
from
 (select
 a.id, a.card_no, a.user_id, a.card_type_code, b.card_type_name, a.product_code,c.product_type_name, a.pin_no, a.cvv2, a.status, a.exprie_time, a.create_time, a.update_time
 from
 t_card a,
 t_card_type b,
 t_product c
 where
 a.card_type_code = b.id and
 a.product_code = c.id) d
 where d.id = #{cardId,jdbcType=INTEGER}

   </select>

    <select id="selectAllTCardWarpperByUserId" resultMap="TCardWarpperResult" parameterType="java.lang.Integer">

select
 d.id, d.card_no, d.user_id, d.card_type_code, d.card_type_name, d.product_code,d.product_type_name, d.pin_no, d.cvv2, d.status, d.exprie_time, d.create_time, d.update_time
from
 (select
 a.id, a.card_no, a.user_id, a.card_type_code, b.card_type_name, a.product_code,c.product_type_name, a.pin_no, a.cvv2, a.status, a.exprie_time, a.create_time, a.update_time
 from
 t_card a,
 t_card_type b,
 t_product c
 where
 a.card_type_code = b.id and
 a.product_code = c.id) d
 where d.user_id = #{userId,jdbcType=INTEGER}

   </select>


  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 28 23:19:59 CST 2019.
    -->
    delete from t_card
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.hexu.ebank.card.entity.TCard">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 28 23:19:59 CST 2019.
    -->
    insert into t_card (id, card_no, user_id, 
      card_type_code, product_code, pin_no, 
      cvv2, status, exprie_time, 
      create_time, update_time)
    values (#{id,jdbcType=INTEGER}, #{cardNo,jdbcType=VARCHAR}, #{userId,jdbcType=INTEGER}, 
      #{cardTypeCode,jdbcType=INTEGER}, #{productCode,jdbcType=INTEGER}, #{pinNo,jdbcType=VARCHAR}, 
      #{cvv2,jdbcType=VARCHAR}, #{status,jdbcType=CHAR}, #{exprieTime,jdbcType=TIMESTAMP}, 
      #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.hexu.ebank.card.entity.TCard">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 28 23:19:59 CST 2019.
    -->
    update t_card
    set card_no = #{cardNo,jdbcType=VARCHAR},
      user_id = #{userId,jdbcType=INTEGER},
      card_type_code = #{cardTypeCode,jdbcType=INTEGER},
      product_code = #{productCode,jdbcType=INTEGER},
      pin_no = #{pinNo,jdbcType=VARCHAR},
      cvv2 = #{cvv2,jdbcType=VARCHAR},
      status = #{status,jdbcType=CHAR},
      exprie_time = #{exprieTime,jdbcType=TIMESTAMP},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 28 23:19:59 CST 2019.
    -->
    select id, card_no, user_id, card_type_code, product_code, pin_no, cvv2, status, 
    exprie_time, create_time, update_time
    from t_card
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 28 23:19:59 CST 2019.
    -->
    select id, card_no, user_id, card_type_code, product_code, pin_no, cvv2, status, 
    exprie_time, create_time, update_time
    from t_card
  </select>


</mapper>